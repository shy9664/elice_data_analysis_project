{% extends 'base.html' %}

{% block content %}
    아이디 :
    <input type="text" id='user_id' name="user_id" /> 
    비밀번호 :
    <input type="password" id='user_pw' name="user_pw" />
    <button onclick="Login()">로그인</button>
{% endblock %}  

{% block scripts %}
<script>
    function Login() {
        let user_id = $("#user_id").val();
        let user_pw = $("#user_pw").val();
        $.ajax({
            type:"POST",
            url:"/login",
            data: {
                user_id: user_id,
                user_pw: user_pw
            },
            success: function(response) {
                if (response.result == "success") {
                    document.cookie=`access_token=${response.access_token};`
                    document.cookie=`user_name=${response.user_name}`
                    window.location.href = '/';
                    alert('로그인 성공')
                } else {
                    window.location.reload()
                    alert('아이디와 비밀번호를 다시 확인해주세요');
                }
            },
            error: function(){
                window.location.reload()
                alert('로그인 실패')
            }
        });
    }
</script>
{% endblock %}